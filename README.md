# yandex-afisha-analysis
Анализ пользователей Яндекс Афиши


Анализ лояльности пользователей Яндекс Афиши
 О проекте
Проект представляет собой комплексный анализ пользовательского поведения на платформе Яндекс Афиша для выявления ключевых факторов, влияющих на повторные покупки. На основе данных о 290,611 транзакциях от 21,933 уникальных пользователей за период с июня по октябрь 2024 года были построены модели лояльности и разработаны рекомендации по удержанию клиентов.


####  Цели проекта:
 
1. Понимание поведенческих паттернов пользователей для сегментации аудитории


2. Выявление ключевых факторов, влияющих на повторные покупки


3. Разработка модели прогнозирования лояльности на основе характеристик первого заказа


4. Формирование рекомендаций по персонализации маркетинговых коммуникаций


#### Задачи проекта:

1. Подготовка данных:

- Загрузка и объединение данных из SQL-базы


- Конвертация валют (тенге → рубли) для единообразия


- Обработка пропусков и фильтрация выбросов


- Стандартизация форматов дат и категориальных переменных


2. Аналитическое исследование:

- Статистический анализ распределения ключевых метрик:

    a) Количество заказов на пользователя

    b) Средняя выручка и количество билетов

    c) Временные интервалы между покупками
    

- Сегментация пользователей по уровню лояльности:

    a) Одноразовые покупатели

    b) Возвращающиеся клиенты (2+ заказа)

    c) Высоколояльные пользователи (5+ заказов)

    d) Корреляционный анализ для выявления взаимосвязей между параметрами

3. Построение профилей пользователей:

- Создание агрегированных характеристик для каждого пользователя:

    a) Демографические данные (регион, тип устройства)

    b) Поведенческие метрики (частота покупок, средний чек)

    c) Временные характеристики (дни недели, сезонность)

    d) Предпочтения (типы мероприятий, сервисы покупки)
    

- Разработка бинарных признаков для классификации (is_two, is_five)

4. Выявление драйверов лояльности:

- Анализ влияния первого заказа на дальнейшее поведение:

    a) Связь типа устройства с вероятностью возврата

    b) Влияние типа первого мероприятия на retention

    c) Роль сервиса покупки в формировании лояльности
    

- Исследование временных паттернов:

    a) Оптимальные интервалы между покупками

    b) Пиковые дни и часы для повторных заказов

    c) Сезонные колебания активности

5. Формирование инсайтов и рекомендаций:

- Количественная оценка влияния различных факторов на лояльность

- Разработка сегментированных стратегий удержания для разных групп пользователей

- Создание системы триггеров для автоматизации маркетинговых коммуникаций

- Проектирование механик лояльности на основе выявленных паттернов

6. Визуализация результатов:

- Построение информативных дашбордов и графиков

- Создание понятных отчетов для бизнес-пользователей

- Разработка наглядных материалов для презентации результатов



 1. Информация о данных и предоработка

* Исходные данные:

В проекте использовались данные о 290611 заказах от 21933 уникальных пользователей Яндекс Афиши за период с июня по октябрь 2024 года. После фильтрации данных количество пользователей сократилось до 20739. Данные содержали информацию о заказах, пользователях, типах мероприятий, устройствах и географическом распределении.

* Предобработка включала:

1. Конвертацию валют: Все заказы в тенге были переведены в рубли по актуальному курсу, тенге → рубли по курсу ~19.18 руб/100 тенге

2. Обработку пропусков: Пропуски обнаружены только в столбце days_since_prev (7,54% от всех записей), что объяснимо для пользователей с единственной покупкой

3. Удаление дубликатов: 2,323 записи удалены


4. Фильтрацию выбросов: 

    a)Для корректного анализа выручки были отфильтрованы выбросы по 99-му перцентилю (значения выше 99% распределения). 
    
    b) Удалено 2,385 записей выше 99-го перцентиля по выручке
    
    c) Удалены 327 отрицательных значений (вероятные возвраты)
    
5. Итоговый набор данных после обработки:

    a) 236,700 транзакций (81.5% от исходных)

    b)20,739 пользователей (94.5% от исходных)

    c) Средний чек: 543.62 рубля

    d) Среднее количество билетов: 2.74


 2. Основные результаты анализа

* Распределение пользователей по числу заказов:

1. 20739 уникальных пользователя в выборке

2. Пользователи с 1 заказом: 8,890 чел. (42,87%)

3. С 2+ заказами: 11849 чел. (57,13%)

4. С 5+ заказами: 4376 чел. (21,10%)

*  Ключевые статистические показатели:

1. Средняя выручка с заказа: 543,62 рубля

2. Среднее количество заказов: 3,43 (медиана 2)

3. Среднее количество билетов в заказе: 2,74

4. Популярные типы мероприятий:

    a) Выставки: 61,14%
    
    b) Театр: 59,38%
    
    c) Концерты: 57,49%
    
    d) Спорт: 51,61% (-5,52% от среднего)
    
    e) Кино: 53,44% (-3,69% от среднего)

5. Билетный оператор:

    a) Лучшие: "Билеты без проблем" (56,38%), "Мой билет" (56,67%)

 3. Признаки первого заказа, связанные с возвратом польвателей

* Сильно связанные признаки:

1. Тип устройства первого заказа: мобильное устройство является успешной «точкой входа»: кратно больше количество пользователей, использовавшие мобильное устройство. Пользователи, начавшие взаимодействие с сервисом через стационарное устройство, чаще становятся возвратными клиентами.


2. Тип мероприятия первого заказа: Есть сегменты с очень небольшим числом пользователей, например, выставки (1,95%) и ёлки (0,45%). Наиболее крупные сегменты — концерты (44,19%) и другое (24,88%).

3. Сервис первого заказа: Наиболее лояльные пользователи приходят через "Билеты без проблем" и "Мой билет".

* Умеренно связанные признаки:

1. Регион первого заказа: лучшая возвращаемость 'Верхозёрский край' (100.00%), при этом в регионе 1 пользователь.

2. День недели первого заказа: 

* День недели первой покупки влияет на возвращаемость, но не является определяющим фактором. Аудитория, пришедшая в субботу и понедельник, чуть более лояльна.

 4. Взаимосвязь выручки, количества билетов и повторных покупок

* Выявленные закономерности:

1. Группа 2–4 заказа (зелёный) имеет более выраженный пик плотности в области очень низких значений.

2. Группа 5+ заказов (фиолетовый) показывает смещённый пик в область оклоо 500 рублей, что говорит о том, что у более лояльных пользователей средний чек выше.

Группа 2-4 заказа: медиана 476 рублей.

Группа 5+ заказов: медиана 524 рублей.

Лояльные клиенты тратят на 10.1% больше за заказ.

 5. Временные характеристики, влияющие на удержание

* Ключевые временные паттерны:

1. Средний лайфтайм лояльного пользователя: 23.2 дня (для группы 2-4 заказа)

2. Средний интервал между покупками: 11.5 дней (для 5+ заказов)

3. Большинство возвратных пользователей совершают повторные покупки с очень коротким средним интервалом.


#### 6. Корреляционный анализ: характеристики первого заказа и число покупок

* first_region_name — first_service_name: 0,70 (сильная корреляция)
    → Определённые билетные операторы сильно привязаны к конкретным регионам.

* first_region_name — first_event_type: 0,51 (умеренная корреляция)
    → Типы мероприятий заметно зависят от региона.

* first_service_name — first_event_type: 0,59 (умеренная корреляция)
    → Билетные операторы специализируются на определённых типах мероприятий.

* first_region_name — avg_revenue_rub: 0,37 (слабая корреляция)
    → Средний чек заметно варьируется в зависимости от региона.

* first_service_name — avg_revenue_rub: 0,39 (слабая корреляция)
    → Некоторые операторы ассоциируются с более дорогими заказами.

* avg_tickets_count — order_segment: 0,37 (умеренная корреляция)
    → Чем больше билетов в заказе, тем больше заказов у пользователя.
    

* avg_tickets_count — 0,37 (умеренная корреляция)
    → Чем больше среднее количество билетов в заказе, тем больше заказов у пользователя.

* first_region_name — 0,12 (слабая корреляция)
    → Регион слабо связан с количеством заказов.

* first_service_name — 0,073 (очень слабая корреляция)
    → Билетный оператор почти не влияет на число заказов.

* first_event_type — 0,041 (очень слабая корреляция)
    → Тип мероприятия минимально связан с количеством заказов.

* avg_revenue_rub — 0,34 (слабая корреляция)
    → Средняя выручка слабо связана с числом заказов.

* first_device — 0,017 (почти отсутствует)
    → Тип устройства (мобильный/десктоп) практически не влияет на количество заказов.

### Рекомендации для заказчика

* Стратегические рекомендации:



1. Разработать сегментированные программы лояльности для пользователей, совершивших первый заказ через мобильное устройство.

3. Создать специальные предложения для пользователей, купивших билеты на концерты и в театры, как первую покупку

* Оптимизация воронки продаж:

1. Сконцентрировать маркетинговые усилия на пиковые дни.

* Персонализация коммуникаций:

1. Внедрить систему рекомендаций на основе типа первого мероприятия.

2. Создать разные механики удержания для пользователей из разных регионов.

* Тактические действия:

1. Специальные предложения:

    a) Предлагать скидки на второй заказ для пользователей, купивших 2-4 билета в первый раз

    b) Создать программу "Второй заказ со скидкой 15%" для пользователей со средним чеком 500-1,500 рублей

2. Улучшение пользовательского опыта:

    a) Оптимизировать мобильный интерфейс для увеличения мобильных пользователей

    b) Разработать упрощенный процесс повторной покупки для пользователей через мобильное устройство

* Мониторинг и аналитика:

1. Внедрить дашборд для отслеживания ключевых метрик по сегментам.

2. Регулярно анализировать корреляцию между характеристиками первого заказа и лояльностью

* Мероприятия с высоким потенциалом лояльности:

1. Приоритетные направления:

    a) Усилить продвижение на концерты и в театры как точки входа для новых пользователей

    b) Развивать партнерство с сервисом "Билеты без проблем" как одним из крупнейших источником лояльных клиентов

2. Ожидаемый эффект: Реализация данных рекомендаций может повысить интерес опытных пользователей и привлечь новых покупателей в короткие сроки.
